<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.dong.goodsMapper">
	<select id="goodsList"
		resultType="kr.co.dong.domain.GoodsEntity">
		select goods.id,goods.name,goods.price,img.path
		from goods
		join img on img.refer_id= goods.id;
	</select>
	<select id="goodsPage"
		resultType="kr.co.dong.domain.GoodsEntity">
		select goods.name,goods.price,colorType,goods.id,
		brand.name as brandName
		from goods
		join brand on brand.id = goods.brand_id
		where goods.id = #{goods.id}
	</select>
	<select id="goodsPageImg" resultType="kr.co.dong.domain.ImgsEntity">
		select path
		from img
		where refer_id = #{refer_id}
	</select>
	<!-- 장바구니 클릭시 insert -->
	<insert id="insertCarts" parameterType="java.util.Map">
		insert into cart (username,goods_id) values(#{username},#{goods_id})	
	</insert>
	<!-- 장바구니 유저에따라 다른 리스트 -->
	<select id="cartsList" resultType="kr.co.dong.domain.GoodsEntity">
		select goods.name,goods.price,goods.colorType,
		cart.username,
		img.path
		from cart
		join goods on goods.id = cart.goods_id
		join img on img.refer_id = goods_id	
		where username = #{username} 
	</select>
	<!-- 비회원 -> 회원 로그인시 -->
	<update id="updateCartUsername">
		update cart
		set username = #username;
	</update>
</mapper>